
- name: python3 | Set python link to python
  set_fact: python_dir=/usr/bin/
  when: (ansible_distribution == 'Debian' or ansible_distribution == 'Ubuntu')

#TODO on RedHat add python3.6 by hand

- name: python3 | Set python link to python
  set_fact: python_dir=/usr/local/bin
  when: (ansible_distribution == 'CentOS' or ansible_distribution == 'Red Hat Enterprise Linux' or ansible_distribution == 'RedHat')

- name: python3 | Set python link to python version
  set_fact: python3_version=3.5

#ls -la /etc/alternatives/python*
#sudo update-alternatives --install /usr/bin/python python /usr/bin/python3.6 30
#sudo update-alternatives --install /usr/bin/python python /usr/bin/python3.5 20
#sudo update-alternatives --install /usr/bin/python python /usr/bin/python2.7 10
#sudo update-alternatives --config python

- name: python3 | Display python link before
  action: command update-alternatives --display python
  when: (ansible_distribution == 'Debian' or ansible_distribution == 'Ubuntu')
  changed_when: false
  become: yes
  ignore_errors: true

- name: python3 | Configure python alternatives
  alternatives: name={{ item.name }} link={{ item.link }} path={{ item.path }}
  with_items:
  - { name: python, link: /usr/bin/python, path: "{{ python_dir }}python2.7" }
  - { name: python, link: /usr/bin/python, path: "{{ python_dir }}python{{ python3_version }}" }
  when: not( (python_dir is undefined) or (python_dir is none) or (python_dir | trim == '') )
        and
        not( (python3_version is undefined) or (python3_version is none) or (python3_version | trim == '') )
  become: yes
  ignore_errors: true

- name: python3 | Display python link after
  action: command update-alternatives --display python
  when: not( (python_dir is undefined) or (python_dir is none) or (python_dir | trim == '') )
        and
        not( (python3_version is undefined) or (python3_version is none) or (python3_version | trim == '') )
        and (ansible_distribution == 'Debian' or ansible_distribution == 'Ubuntu')
  changed_when: false
  become: yes

##alternatives --install /usr/bin/python python /usr/local/bin/python3.6 2
#alternatives --install /usr/bin/python python /usr/bin/ython3.6 2
#alternatives --install /usr/bin/python python /usr/bin/python2.7 1

#alternatives --list | grep -i python
 
#alternatives --install /usr/bin/python python /usr/local/bin/python3.6 2
#alternatives --install /usr/bin/python python /usr/bin/python2.7 1
 
#pip3 install docker-py
#pip3 install -U docker-compose
#pip3 install ansible

#python3 /usr/bin/ansible localhost -m ping

#update-alternatives --config python
